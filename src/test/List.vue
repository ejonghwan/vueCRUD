<template>

    <!-- <h3>ìŠ¤í† ì–´ í…ŒìŠ¤íŠ¸ state í•¨ìˆ˜</h3> 
    <div>a??? {{ testState }}</div>
    <div>b??? {{ testState2 }}</div>
    <button type="button" @click="stateAdd">store change</button> -->

    <!-- <br /><br /> -->


    <h3>v-show v-if test</h3> 
    <div>
        boolean?
        <span v-show="ishoho">true</span>
        <span v-show="!ishoho">false</span>
    </div>
    <div v-if="ishoho">is hoho ì°¸</div>
    <div v-else>is hoho ê±°ì§“</div>
    <button type="button" @click="hohoToggle">toggle</button>

    <br /><br />
    
    <h3>v-show v-if test</h3> 
    <div> nnn? {{ nnn }}</div>
    <div v-if="nnn === 5">5ì„</div>
    <div v-else-if="nnn === 6">6ì„</div>
    <div v-else-if="nnn === 7">7ì„</div>
    <div v-else>5,6,7 ë‹¤ ì•„ë‹˜</div>
    <button type="button" @click="nnninc">dddinc</button>
    <button type="button" @click="nnndec">ddddec</button>

    <br /><br />

    <h3>ìŠ¤í† ì–´ í…ŒìŠ¤íŠ¸ - count</h3>    
    <div>name? {{ name }}</div>
    <div>count? {{ count }}</div>
    <div>doubleCount? {{ doubleCount }}</div>
    <button type="button" @click="inc">count++</button>
    <button type="button" @click="resetNumber">reset</button>

    <br /><br />

    <h3>ìŠ¤í† ì–´ í…ŒìŠ¤íŠ¸ - post</h3>    

    <div>
        title - <input type="text" name="title" :value="objs.title" @input="handleChange"/>
        content - <input type="text" name="body" :value="objs.body" @input="handleChange"/>
        {{ objs.title }}{{ objs.body }}
    </div>

    <div class="loadingbar" :class="{ active: isLoading }">ë¡œë”©ì¤‘!!!!!!!!!!</div>
    <button type="button" @click="allppp">all post ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <button type="button" @click="gtuser">post ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <button type="button" @click="postupd">post ì—…ë°ì´íŠ¸</button>
    <ul>
        <li v-for="u in post" :key="u.title">
            <div>{{ u.id }} - {{ u.title }}</div>
        </li>
    </ul>
    <br /><br />

    <h3>ë°˜ì‘ì„± í…ŒìŠ¤íŠ¸ 1 - ref ì¼ë°˜ ë³€ìˆ˜ë¡œ í•˜ë©´ ë°˜ì‘ x </h3>
    <div>count: {{ count }}</div>
    <button type="button" @click="handleInc">inc</button>
    <button type="button" @click="handleDec">dec</button>


    <h3>ë°˜ì‘ì„± í…ŒìŠ¤íŠ¸2 - reative ë¶ˆë³€ì„± í…ŒìŠ¤íŠ¸ </h3>
    <strong>ì¼ë°˜ ê°ì²´ - í´ë¦­ í•´ë„ ë³€ê²½ x </strong>
    <div v-for="test in dd" :key="test.name" @click="test.age++" style="cursor: pointer; border: 1px solid #ddd;">{{ test.age }}</div>

    <strong>ë°˜ì‘ì„± ê°ì²´ - í´ë¦­ ì‹œ ë³€ê²½ ë¨</strong>
    <div v-for="test in react" :key="test.name" @click="test.age++" style="cursor: pointer; border: 1px solid #ddd;">{{ test.age }}</div>



    <div v-for="use in getDD" :key="use.id">name - {{ use.name }}</div>
    <!-- <div v-for="use in getDD" :key="use.id">phone - {{ use.phone }}</div> -->
    <!-- <div v-for="use in getDD" :key="use.id">website - {{ use.website }}</div> -->

    <h1>ë¶€ëª¨ì»´í¬</h1>
    <ListChild v-for="user in dd" :key="user.name" :data="user" @send-evt="fn"/>
    <br /><br />
    <!-- <ListChild /> -->




    <!-- íŒ!!! -->

    <!-- class ì¡°ê±´ë¶€ ë Œë”ë§  -->
    <!-- <div v-if="data.userSkill === 'senior'" class="list_item__chip senior">{{ data.userSkill }}</div> -->
    <!-- <div v-if="data.userSkill === 'junior'" class="list_item__chip junior">{{ data.userSkill }}</div> -->

    <!-- style ì¡°ê±´ë¶€ ë Œë”ë§ %ë¥¼ ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ë©´ ê°œí¸í• ë“¯-->
    <!-- <div v-if="data > 80" class="gauge" :style="{ width: data + '%' }">{{ data }}%</div> -->
    <!-- <div v-else class="gauge" :style="{ width: data + '%', backgroundColor: 'red' }">{{ data }}%</div> -->



    <!-- varì€ ref -->
    <!-- objëŠ” reactive -->
    <!-- fnì€ computed -->
    <!-- domì€ ref 
        <p ref="pTag">
        const pTag = ref() 
    -->

    <!-- watch í˜ì´ì§€ë„¤ì´ì…˜ ê°•ì˜ ë‹¤ì‹œ ë³´ê¸° -->

    <!-- í•˜ë‚˜ì˜ watchë¡œ ìŠ¤í† ì–´ í•˜ë‚˜ ê°ì‹œ ê°€ëŠ¥ -->
    <!-- watch(
        pinia.state,
        (state) => {
            // ë³€ê²½ë  ë•Œë§ˆë‹¤ ì „ì²´ ìƒíƒœë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ìœ ì§€
            localStorage.setItem('piniaState', JSON.stringify(state))
        },
        { deep: true }
    ) -->


</template>

<script setup lang="ts">
    import { ref, onBeforeMount, reactive, computed, onUpdated, onMounted } from 'vue';
    import ListChild from './ListChild.vue';
    import axios from 'axios'

    // console.log(ListChild) //í•„ìˆ˜ê°’ì´ ë­”ì§€ ì°í˜

    // v-show v-if test 
    const ishoho = ref<boolean>(false)

    function hohoToggle() {
        ishoho.value = !ishoho.value
        console.log(ishoho.value)
    }
    
    const nnn = ref<number>(0)
    function nnninc() {
        nnn.value++
    }
    function nnndec() {
        nnn.value--
    }

    


    // ######################################################### í”¼ë‹ˆì•„ ì˜¤ë¸Œì íŠ¸í˜• 
    import { useObjStore } from '../store/objStore.ts'
    const objStore = useObjStore();
    // const { userList, user } = storeToRefs(objStore)
    
    console.log('uu?', objStore.userList)


    // ########################################################################  í”¼ë‹ˆì•„ ìŠ¤í† ì–´ ì‚¬ìš©
    import { useCounterStore } from '../store/testStore'
    import { storeToRefs } from 'pinia'
    const store = useCounterStore();
    // âŒ ë°˜ì‘ì„±ì„ ê¹¨ëœ¨ë¦¬ê¸° ë•Œë¬¸ì— ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    // `props`ì—ì„œ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•©ë‹ˆë‹¤.
    // const { name, doubleCount, count } = store;
    // console.log('name???', name) // ì–¸ì œë‚˜ "Eduardo"
    // console.log('dbcount???', doubleCount) // ì–¸ì œë‚˜ 0
    
    const { name, doubleCount, count, increment, reset } = storeToRefs(store) // ë°˜ì‘ì„± ìœ ì§€í•˜ë ¤ë©´ ì´ë ‡ê²Œ
    
    
    function inc() {
        store.increment()
        console.log(count)
    }

    function resetNumber() {
        store.reset();
    }

    
    
    // ########################################################################  í”¼ë‹ˆì•„ ìŠ¤í† ì–´ ë°ì´í„° ì‚¬ìš© 
    import { useUserStore } from '../store/userStore'
    const userStore = useUserStore();
    const { isLoading, post, pageNum } = storeToRefs(userStore)
    const { getPost, updatePost, allPost } = userStore; 
    

    console.log('?????', pageNum.value)

    function allppp() {
        allPost()
    }

    function gtuser():void {
        getPost()
        // console.log('get user?', isLoading, post)
    }

    interface ReqData {
        id: number;
        userId: string;
        title: string;
        body: string;
    }
    let objs = ref<ReqData>({
        id: 3,
        userId: 'hoho',
        title: '',
        body: '',
    })
    function handleChange(e) {
        objs.value = {
            ...objs.value,
            [e.target.name]: e.target.value,
        }
        console.log(objs.value)
    }

    function postupd() {
        updatePost({ 
            id: objs.value.id, 
            userId: objs.value.userId, 
            title: objs.value.title, 
            body: objs.value.body 
        })
    }


    // onMounted(() => {
    //     const s = state();
    //     console.log('mounted??', s)
    // })

    // function stateAdd() {
    //     // const s = state();
    //     // s.testState++;
    //     // s.testState2 = 'change state'
    //     // console.log('s??', s)
    //     // return { a: s.testState, b:  s.testState2 }

       
    //     userStore.$patch(state => { 
    //         // testState: userStore.testState++,
    //         // testState2: 'ë³€ê²½ ëìŒ'
    //         console.log('state?', state)
    //     })
    //     // console.log('í”¼ë‹ˆì•„ ìƒíƒœ ? ', userStore)
    // }
    // // const { a, b } = stateAdd()

    

    // setTimeout(() => {
    //     store.increment()
    // }, 1000)

    // âœ… ì´ê²ƒì€ ë°˜ì‘ì ì¼ ê²ƒì…ë‹ˆë‹¤
    // ğŸ’¡ ë˜í•œ `store.doubleCount`ë¡œ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
    // const doubleValue = computed(() => store.doubleCount)


    interface ListDDINfo {
        address: string;
        zz?: string;
    }
    interface ListDD {
        id: number, 
        name: string, 
        age: number, 
        info: ListDDINfo
    }
    const dd: ListDD[] = [
        { id: 0, name: 'a1', age: 21, info: { address: 'busan1', zz: 'hoho' } },
        { id: 1, name: 'a2', age: 22, info: { address: 'busan2', zz: 'hoho' } },
        { id: 2, name: 'a3', age: 23, info: { address: 'busan3', zz: 'hoho' } },
        { id: 3, name: 'a4', age: 24, info: { address: 'busan4', zz: 'hoho' } },
        { id: 4, name: 'a5', age: 25, info: { address: 'busan5', zz: 'hoho' } },
        { id: 5, name: 'a6', age: 26, info: { address: 'busan6', zz: 'hoho' } },
        { id: 6, name: 'a7', age: 27, info: { address: 'busan7', zz: 'hoho' } },
        { id: 7, name: 'a8', age: 28, info: { address: 'busan8', zz: 'hoho' } },
    ]


    
    // const menu = [
    //     { icon: 'Dashboard', label: 'Dashboard' },
    //     { icon: 'Index', label: 'Index' },
    //     { icon: 'Calender', label: 'Calender' },
    //     { icon: 'Jobs', label: 'Jobs' },
    //     { icon: 'Reference', label: 'Reference' },
    //     { icon: 'Document', label: 'Document' },
    //     { icon: 'CareerSite', label: 'CareerSite' },
    //     { icon: 'Employee', label: 'Employee' },
    //     { icon: 'Structure', label: 'Structure' },
    //     { icon: 'Settings', label: 'Settings' },
    // ]





    // ë°˜ì‘ì„± í…ŒìŠ¤íŠ¸ 1
    // const count = ref(0)
    // let count = 0; // ë°˜ì‘ì„± ì—†ëŠ”ê±¸ë¡œ í•˜ë©´ ì—…ë°ì´íŠ¸ê°€ ì•ˆë¨. ê·¸ëƒ¥ useRef + useState í•©ì³ì ¸ìˆëŠ”ê±°ë„¤ 

    // function handleInc() {
    //     // count.value++
    //     count++
    // }
    // function handleDec() {
    //     // count.value--
    //     count--
    // }

    // ë°˜ì‘ì„± í…ŒìŠ¤íŠ¸..ë¶ˆë³€ì„±ê³¼ ê¹Šì€ë³µì‚¬ ì˜…ì€ë³µì‚¬ í…ŒìŠ¤íŠ¸.  reactive / ref.. refëŠ” ìˆ˜ì •ê°€ëŠ¥í•˜ì§€ë§Œ ë¦¬ì•¡í‹°ë¸ŒëŠ” ë°ì´í„° ë“¤ì–´ì˜¤ë©´ ìˆ˜ì •ë¶ˆê°€
    const react = reactive<ListDD[]>([
        { id: 0, name: 'a1', age: 21, info: { address: 'busan1', zz: 'hoho' } },
        { id: 1, name: 'a2', age: 22, info: { address: 'busan2', zz: 'hoho' } },
        { id: 2, name: 'a3', age: 23, info: { address: 'busan3', zz: 'hoho' } },
        { id: 3, name: 'a4', age: 24, info: { address: 'busan4', zz: 'hoho' } },
        { id: 4, name: 'a5', age: 25, info: { address: 'busan5', zz: 'hoho' } },
        { id: 5, name: 'a6', age: 26, info: { address: 'busan6', zz: 'hoho' } },
        { id: 6, name: 'a7', age: 27, info: { address: 'busan7', zz: 'hoho' } },
        { id: 7, name: 'a8', age: 28, info: { address: 'busan8', zz: 'hoho' } },
    ])


    const getDD = ref<object[]>([])
    async function getData():Promise<object> {
        const pjson = await axios.get('https://jsonplaceholder.typicode.com/users/')
        const da = pjson.data;

        // console.log(getDD)

        getDD.value = da;
        return da;
    } 

    onBeforeMount(():void => {
        getData()
    })



    // emit 
    const childDD = reactive([])
    const fn = (a:object) => {
        // console.log('a?', a[0].name)
        // ì´ê±° í…ŒìŠ¤íŠ¸ 
        // childDD = a;
        // console.log(childDD)
    }




</script>


<style lang="scss" scoped>

    .loadingbar {border: 1px solid red; display: none;}
    .loadingbar.active {background-color: red; color: #fff; display: block}

</style>